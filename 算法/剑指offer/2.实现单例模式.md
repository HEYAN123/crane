# 实现单例模式

## 题目

- 设计一个类，我们只能生成该类的一个实例。

## 解析

- 核心思想：用一个变量来标志当前是否已经为某个类创建过对象，如果是，则下次获取该类的实例时直接返回之前创建的对象

```javascript
// 单例类
var Singleton = function(name) {
    this.name = name;
}

Singleton.prototype.getName = function() {
    alert(this.name);
}

Singleton.getInstance = (function(){
    var instance = null;
    return function(name) {
        if(!instance) {
            instance = new Singleton(name);
        }
        return instance;
    }
})();

// ----------------闭包实现单例
var CreateDiv = (function() {
    var instance;
    var CreateDiv = function(html) {
        if(instance) {
            return instance;
        }
        this.html = html;
        this.init();
        return instance = this;
    };
    CreateDiv.prototype.init = function() {
        var div = document.createElement('div');
        div.innerHTML = this.html;
        document.body.appendChild(div);
    };
    return CreateDiv;
})();

var a = new CreateDiv('111');
var b = new CreateDiv('222');
console.log(a === b); // true



var window.setTimeout = (callback,time) => {
    var that = this;

    var args = arguments.slice(2.arguments.length);
    var fn = arguments[0];
    var time = arguments[1];
    return (setTimeout2(){
        that.setTimeout(fn(...args), time);
    })();
    


    
}
```