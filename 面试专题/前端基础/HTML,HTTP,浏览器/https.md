# https

- 参考资料：《图解http》
- 如果还没有对http有所理解，请看上一篇文章：[http](./http.md)

- https，超文本传输安全协议，简单理解为是加了一层防护甲的http，更加安全。

## http协议的缺点

- 为什么要产生一个https呢？那肯定是因为http的一些缺点无法被忽略，所以出现了加强版的http——https。

- 具体的一些主要缺点如下：

### 1. 通信内容赤果果地暴露在线路上，内容会被窃听

- 先来看看互联网什么样子：

![avatar](../../../static/https.PNG)

- 结合前面讲的，再看看我们的http报文传递在这里面是怎么传递的：
- 数据从一台计算机的应用层下传到数据链路层，然后沿着这个互联网上的线路出发，经过数个中转站（路由器）的转发，到达目标机器的数据链路层，然后上传至应用层。

- 互联网连接着地球上四面八方的计算机，不是私有物，而http报文在这个网上传输时是明文（未加密）传输的，那么如果有心人想要窥视截获你的数据，那就是轻而易举的。这好像皇帝出游没有易容易装，我站在皇帝的必经之路上就可以很容易地抓到这个皇帝。

### 2. 不验证通信方的身份，因此有可能遭遇伪装

- 之前我们讨论过http通信的过程：客户端发出请求，服务器处理并响应。
- 在这个过程中我们可以看到，对于请求，服务器不会选择我接收还是不接收，而客户端也不关心，我得到的响应，是不是真的是我要求的那个服务器传来的。
- 也就是说，在http协议下的请求和响应对于通信的双方都不会进行确认。
- 这会导致什么问题呢？
    1. 不确定客户端或者服务器是不是伪装的：发来请求的客户端可能是个假冒的来骗取信息的，或者服务器是假冒的返回了欺骗客户端的假信息
    2. 所有请求服务器都照单全收（全部会进入处理流程），当有人恶意发起大量无意义请求时可能会造成服务器崩溃（Dos攻击，即拒绝服务攻击），导致无法处理正常请求
    3. 等等
- 由于请求和响应来源的不确定性，我们可以看到会出现很多安全问题。

### 3. 无法证明报文的完整性，有可能拿到的报文已经被改过了

- 经由互联网上的传输，客户端发出的请求内容到了服务器手里一定是原内容吗？服务器传给客户端的数据一定是原数据吗？
- 经过上面的讨论，答案很明显了：不一定。
- 如果皇帝出游时我半路拦截了皇帝，然后把他绑架了，我或者另找个人易容易装成皇帝再回宫，那皇帝就不是原来的皇帝了。
- 这种半路拦截数据并进行篡改的恶意攻击，我们称之为中间人攻击（MITM）。

## https原理

- 使用SSL或TLS建立安全通信线路，在这条线路上使用HTTP通信，这种与SSL或TLS组合使用的http成为HTTPS（在安全线路中传递的HTTP称为HTTPS）

### SSL

### TLS